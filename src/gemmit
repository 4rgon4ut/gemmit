#!/bin/bash

# A wrapper for git commit to use gemmit.

# Usage:
# gemmit [-a|--add] <template> [-y]
# gemmit [-h|--help]

if [ "$1" == "-h" ] || [ "$1" == "--help" ]; then
    echo "Usage: gemmit [-a|--add] <template> [-y]"
    echo "       gemmit [-h|--help]"
    echo ""
    echo "Options:"
    echo "  -a, --add    Stage all tracked files before committing."
    echo "  -h, --help   Show this help message."
    echo "  -y           Automatically use the generated commit message without confirmation."
    exit 0
fi

ADD=false
if [ "$1" == "-a" ] || [ "$1" == "--add" ]; then
    ADD=true
    shift
fi

if [ -z "$1" ]; then
    echo "Usage: gemmit [-a|--add] <template> [-y]"
    exit 1
fi

TEMPLATE=$1
shift
ARGS=$@

if $ADD; then
    echo "Adding all files..."
    git add .
fi

echo "Generating commit message with template: $TEMPLATE"
git commit -m "$TEMPLATE $ARGS"
